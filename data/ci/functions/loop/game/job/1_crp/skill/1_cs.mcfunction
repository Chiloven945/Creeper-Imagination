###苦力怕技能1###

#瞄准
execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air if block ^ ^ ^5 air run particle dust 1 0 0 0.8 ^ ^ ^5 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air if block ^ ^ ^5 air run particle dust 0 1 0 0.7 ^ ^-0.3 ^5 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air if block ^ ^ ^5 air run particle dust 0 1 0 0.6 ^ ^-0.6 ^5 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air if block ^ ^ ^5 air run particle dust 0 1 0 0.5 ^ ^-0.9 ^5 0 0 0 1 1 normal @s

execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air unless block ^ ^ ^5 air run particle dust 1 0 0 0.8 ^ ^ ^4 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air unless block ^ ^ ^5 air run particle dust 0 1 0 0.7 ^ ^-0.3 ^4 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air unless block ^ ^ ^5 air run particle dust 0 1 0 0.6 ^ ^-0.6 ^4 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air unless block ^ ^ ^5 air run particle dust 0 1 0 0.5 ^ ^-0.9 ^4 0 0 0 1 1 normal @s

execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air unless block ^ ^ ^4 air run particle dust 1 0 0 0.8 ^ ^ ^3 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air unless block ^ ^ ^4 air run particle dust 0 1 0 0.7 ^ ^-0.3 ^3 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air unless block ^ ^ ^4 air run particle dust 0 1 0 0.6 ^ ^-0.6 ^3 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air unless block ^ ^ ^4 air run particle dust 0 1 0 0.5 ^ ^-0.9 ^3 0 0 0 1 1 normal @s

execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air unless block ^ ^ ^3 air run particle dust 1 0 0 0.8 ^ ^ ^2 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air unless block ^ ^ ^3 air run particle dust 0 1 0 0.7 ^ ^-0.3 ^2 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air unless block ^ ^ ^3 air run particle dust 0 1 0 0.6 ^ ^-0.6 ^2 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air unless block ^ ^ ^3 air run particle dust 0 1 0 0.5 ^ ^-0.9 ^2 0 0 0 1 1 normal @s

execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air unless block ^ ^ ^2 air run particle dust 1 0 0 0.8 ^ ^ ^1 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air unless block ^ ^ ^2 air run particle dust 0 1 0 0.7 ^ ^-0.3 ^1 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air unless block ^ ^ ^2 air run particle dust 0 1 0 0.6 ^ ^-0.6 ^1 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes if block ^ ^ ^1 air unless block ^ ^ ^2 air run particle dust 0 1 0 0.5 ^ ^-0.9 ^1 0 0 0 5 1 normal @s

execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes unless block ^ ^ ^1 air run particle dust 1 0 0 0.8 ^ ^ ^0.1 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes unless block ^ ^ ^1 air run particle dust 0 1 0 0.7 ^ ^-0.3 ^0.1 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes unless block ^ ^ ^1 air run particle dust 0 1 0 0.6 ^ ^-0.6 ^0.1 0 0 0 1 1 normal @s
    execute as @a[scores={job=1},nbt={SelectedItem: {id: "minecraft:creeper_spawn_egg"}}] at @s rotated as @s anchored eyes unless block ^ ^ ^1 air run particle dust 0 1 0 0.5 ^ ^-0.9 ^0.1 0 0 0 1 1 normal @s

#苦力怕防止卡
execute as @e[tag=1_skill_1_spawn,tag=!1_skill_1_par] at @s run particle minecraft:explosion ~ ~0.2 ~ 0.2 0 0.2 1 1 force @a[distance=..15,tag=!no_particle]
    execute as @e[tag=!1_skill_1_par,tag=1_skill_1_spawn] at @s run tp @s ~ ~0.5 ~
    execute as @e[tag=!1_skill_1_par,tag=1_skill_1_spawn] at @s unless block ~ ~ ~ air run tp @s ~ ~0.3 ~
    tag @e[tag=!1_skill_1_par,tag=1_skill_1_spawn] add 1_skill_1_par

#召唤苦力怕
execute as @a[tag=1_skill_1_start] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air if block ^ ^ ^5 air run summon minecraft:creeper ^ ^-1 ^4.8 {CustomName: '[{"text":"苦力怕","color":"dark_green","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]', Tags: ["1_skill_1_spawn"], PersistenceRequired: 1b, Health: 30, Attributes: [{Name: "generic.max_health", Base: 30}], ignited: 1b, ExplosionRadius: 2.3b, Fuse: 23.5s}
    execute as @a[tag=1_skill_1_start] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air if block ^ ^ ^4 air unless block ^ ^ ^5 air run summon minecraft:creeper ^ ^-1 ^3.9 {CustomName: '[{"text":"苦力怕","color":"dark_green","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]', Tags: ["1_skill_1_spawn"], PersistenceRequired: 1b, Health: 30, Attributes: [{Name: "generic.max_health", Base: 30}], ignited: 1b, ExplosionRadius: 2.3b, Fuse: 23.5s}
    execute as @a[tag=1_skill_1_start] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air if block ^ ^ ^3 air unless block ^ ^ ^4 air run summon minecraft:creeper ^ ^-1 ^2.9 {CustomName: '[{"text":"苦力怕","color":"dark_green","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]', Tags: ["1_skill_1_spawn"], PersistenceRequired: 1b, Health: 30, Attributes: [{Name: "generic.max_health", Base: 30}], ignited: 1b, ExplosionRadius: 2.3b, Fuse: 23.5s}
    execute as @a[tag=1_skill_1_start] at @s rotated as @s anchored eyes if block ^ ^ ^1 air if block ^ ^ ^2 air unless block ^ ^ ^3 air run summon minecraft:creeper ^ ^-1 ^1.9 {CustomName: '[{"text":"苦力怕","color":"dark_green","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]', Tags: ["1_skill_1_spawn"], PersistenceRequired: 1b, Health: 30, Attributes: [{Name: "generic.max_health", Base: 30}], ignited: 1b, ExplosionRadius: 2.3b, Fuse: 23.5s}
    execute as @a[tag=1_skill_1_start] at @s rotated as @s anchored eyes if block ^ ^ ^1 air unless block ^ ^ ^2 air run summon minecraft:creeper ^ ^-1 ^0.9 {CustomName: '[{"text":"苦力怕","color":"dark_green","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]', Tags: ["1_skill_1_spawn"], PersistenceRequired: 1b, Health: 30, Attributes: [{Name: "generic.max_health", Base: 30}], ignited: 1b, ExplosionRadius: 2.3b, Fuse: 23.5s}
    execute as @a[tag=1_skill_1_start] at @s rotated as @s anchored eyes unless block ^ ^ ^1 air run summon minecraft:creeper ^ ^ ^ {CustomName: '[{"text":"苦力怕","color":"dark_green","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]', Tags: ["1_skill_1_spawn"], PersistenceRequired: 1b, Health: 30, Attributes: [{Name: "generic.max_health", Base: 30}], ignited: 1b, ExplosionRadius: 2.3b, Fuse: 23.5s}
    execute as @a[tag=1_skill_1_start] at @s run playsound minecraft:entity.firework_rocket.blast player @a[distance=..100] ~ ~ ~ 90 1 0.1
    execute as @e[tag=1_skill_1_spawn] unless entity @s[scores={id=1..}] run scoreboard players operation @s id = @a[tag=1_skill_1_start] id
    tag @a[tag=1_skill_1_start] remove 1_skill_1_start

#技能触发
execute as @a[scores={job=1},tag=1_skill_1_ready] run tag @s add 1_skill_1_start
    execute as @a[scores={job=1},tag=1_skill_1_ready] run scoreboard players set @s cd_1 3
    execute as @a[scores={job=1},tag=1_skill_1_ready] run item replace entity @s hotbar.0 with minecraft:red_stained_glass_pane{display: {Name: '[{"text":"技能冷却中","color":"gray","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]'}} 1
    execute as @a[scores={job=1},tag=1_skill_1_ready] run tag @s add 1_skill_cding
    execute as @a[scores={job=1},tag=1_skill_1_ready] run clear @s minecraft:creeper_spawn_egg
    execute as @a[scores={job=1},tag=1_skill_1_ready] run tag @s remove 1_skill_1_ready

#苦力怕击杀
execute as @e[type=creeper,tag=1_skill_1_spawn] run scoreboard players add @s 1_skill_1_time 1
    execute as @e[tag=1_skill_1_spawn,scores={1_skill_1_time=19..}] at @s run scoreboard players operation @a[distance=..8] killed_by_creeper_id = @s id
    execute as @a[scores={killed_by_creeper=1..}] at @r[scores={killed_by_creeper=0}] if score @p id = @s killed_by_creeper_id run tag @p add trigger_kill
    execute as @a[scores={killed_by_creeper_id=1..,killed_by_creeper=1..}] run tellraw @a [{"text":"击杀","color":"aqua","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"text":" >>> ","color":"white","bold":true,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"selector":"@s","color":"red","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"text":"被","color":"white","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"selector":"@a[tag=trigger_kill]","color":"red","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"text":"炸得大败而归！","color":"white","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]
    execute as @a[tag=trigger_kill] run tag @s add trigger_kill+
    execute as @a[scores={killed_by_creeper_id=1..,killed_by_creeper=1..}] run scoreboard players set @s killed_by_creeper 0
    execute as @a[tag=trigger_kill] run tag @a remove trigger_kill
    execute as @a[scores={killed_by_creeper_id=1..,killed_by_creeper=1..}] at @s if score @s id = @s killed_by_creeper_id run tag @p add trigger_suicide
    execute as @a[scores={killed_by_creeper_id=1..,killed_by_creeper=1..},tag=trigger_suicide] run tellraw @a [{"text":"击杀","color":"aqua","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"text":" >>> ","color":"white","bold":true,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"selector":"@s","color":"red","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false},{"text":"把自己炸得满面尘灰！","color":"white","bold":false,"italic":false,"underlined":false,"strikethrough":false,"obfuscated":false}]
    execute as @a[scores={killed_by_creeper_id=1..,killed_by_creeper=1..},tag=trigger_suicide] run tag @s add trigger_suicide+
    execute as @a[scores={killed_by_creeper_id=1..,killed_by_creeper=1..},tag=trigger_suicide] run scoreboard players set @s killed_by_creeper 0
    execute as @a[tag=trigger_suicide] run tag @a remove trigger_suicide

#非cd锁定
execute as @a[scores={job=1},tag=!1_skill_cding] unless entity @s[nbt={Inventory:[{Slot:0b,id:"minecraft:creeper_spawn_egg",Count:1b}]}] run clear @s minecraft:creeper_spawn_egg
    execute as @a[scores={job=1},tag=!1_skill_cding] unless entity @s[nbt={Inventory:[{Slot:0b,id:"minecraft:creeper_spawn_egg",Count:1b}]}] run item replace entity @s hotbar.0 from block -4961 71 -5025 container.0

#循环
schedule function ci:loop/game/job/1_crp/skill/1_cs 1t append
